#  -*- mode: ruby -*-

%w{rubygems pp what_methods}.each do |mod|
  begin
    require mod
  rescue LoadError
    nil
  end
end

# A grab-bag of tricks, tools, techniques, trifles, and toys for IRB
begin
  require "utility_belt"
  UtilityBelt.equip :defaults
  UtilityBelt::Themes.background :light
rescue LoadError
  %w{irb/completion irb/ext/save-history}.each(&method(:require))
  begin
    require 'wirble'
    Wirble.init
    Wirble.colorize
  rescue LoadError
    nil
  end
ensure
  IRB.conf[:PROMPT][:SNAZZY] = {
    :PROMPT_I => ">> ",
    :PROMPT_C => "*> ",
    :PROMPT_N => "%i> ",
    :PROMPT_S => "%l> ",
    :RETURN   => "==> %s\n"
  }
  IRB.conf[:PROMPT_MODE] = :SNAZZY
  IRB.conf[:AUTO_INDENT] = true
  IRB.conf[:HISTORY_FILE] = "#{ENV['HOME']}/.irb_history"
  IRB.conf[:SAVE_HISTORY] = 5000
end

class Object
  def local_methods(obj = self)
    (obj.methods - (obj.class.superclass || Object).instance_methods).sort
  end
end
